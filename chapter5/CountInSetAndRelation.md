# 一招解决集合与关系中的计数问题

[hawksoft](http://gitee.com/xingyongkang)

[toc]

集合与关系中的计数问题，是指如下的一类问题：给定一个含有$ n $个元素的集合$A$，问集合$A$有多少个子集？问在集合$A$上可以定义多少个关系？可以定义多少个自反关系？可以定义多少个对称关系？等等。



## 1 一招在手

计数问题，是组合数学研究的基本问题之一。这里讲一个最基本和最普遍的计数方法，称为乘法法则。

**乘法法则**：完成一个任务需要$n$步，每一步的方案数分别为：$m_1,m_2,\cdots,m_n$,则完成该任务的的方案总数为：$m_1 \times m_2 \times \cdots \times m_n$

乘法法则很简单，但可以解决很多计数问题。使用该法则的重点在于两个：**一是确定完成任务的步骤，二是确定每一个步骤的可选方案数**。对于有些问题，还是比较直观，如下面的例子：

**例1**：由数字${0,1,\cdots, 9}$组成的8位密码，共有多少个？

解答：套用乘法法则。生成一个满足要求的密码需要**8**步，每一步分别生成密码的1位；因为每一位密码可以是10个数字中的任意一个数字，所以生成密码的每一步有10种方案；所以总的密码数对应所有的解决方案，即为：$10 \times 10 \cdots \times 10 = 10^8$

而对有些问题，则不是很直观，如下面的例子：

**例2**：含有$n$个元素的集合$A$共有多少个不同的子集？

解答：为了使用乘法法则，我们首先将集合$A$的$n$个元素排成一列$a_1,a_2,\cdots,a_n$。根据子集的定义，得到一个子集的任务可以分为$n$步；第$i$步决定元素$a_i$是否选入子集，所以有2种方案。根据乘法法则，总的方案数为：$2 \times 2 \cdots \times 2 = 2^n$

## 2 初试身手

我们这里只研究二元关系，它的**本质是序偶（又称为二元组）的集合**。

首先要记住一点：**如果对集合$A$上的所有元素指定一种顺序，则定义在$A$上的每一个关系，都对应一个$n \times n$的方形矩阵$M_R$**，而且$M_R$是$0-1$矩阵。
$$
M_R=
\begin{pmatrix}
m_{11} & m_{12} & \cdots & m_{1n} \\
m_{21} & m_{22} & \cdots & m_{2n} \\
\vdots & \vdots & \ddots & \vdots  \\
m_{n1} & m_{n2} & \cdots & m_{nn} 
\end{pmatrix}
$$
因此，我们把**集合上关系的计数问题转化为对应的矩阵的计数问题**。



**例3**: 给定含有$n$个元素的集合$A$，能够定义多少个不同的关系？

解答：在$A$上定义一个关系$R$就是确定一个矩阵$M_R$，也就是确定矩阵$M_R$的每一项$m_{ij}$。因为$M_R$共有$n^2$项，所以可以分为$n^2$步；$m_{ij}$只能是0或者1，因此每一步有2种可选方案。根据乘法法则，总的方案数是：$2\times2\cdots\times2=2^n$



**例4**: 给定含有$n$个元素的集合$A$，能够定义多少个不同的恒等关系？

解答：恒等关系对应的矩阵的特点是：对角线上的项全都是1，其余项都是0。因此，获得这样的矩阵可以分为2步：

1. 第一步将对角线上的$n$项设为1，只有**1**种可选方案。
2. 接着将除对角线外的$n^2-n$项设为0，也只有**1**种可选方案。

所以总的方案数有$1\times1=1$。

## 3 横扫天下

按照上面的思路，我们可以照猫画虎，完成其它较为复杂的关系计数问题。

####  1 给定含有$n$个元素的集合$A$，能够定义$2^{n^2-n}$个不同的自反关系

证明：自反关系对应的矩阵的特点是：对角线上的项全都是1，其余项可以是0或1。因此，获得这样的矩阵可以分为以下步骤：

1. 第一步将对角线上的$n$项设为1，只有**1**种可选方案。
2. 通过$n^2-n$步将除对角线外的$n^2-n$项设为0或者1。由于每一步有两种可选方案，所以总的方案数为**$2^{n^2-n}$**。

所以总的方案数有$1\times 2^{n^2-n}=2^{n^2-n}$。

#### 2 给定含有$n$个元素的集合$A$，能够定义$2^{n^2-n}$个不同的反自反关系

证明：反自反关系对应的矩阵的特点是：对角线上的项全都是0，其余项可以是0或1。因此，获得这样的矩阵可以分为以下步骤：

1. 第一步将对角线上的$n$项设为0，只有**1**种可选方案。
2. 通过$n^2-n$步将除对角线外的$n^2-n$项设为0或者1。由于每一步有两种可选方案，所以总的方案数为**$2^{n^2-n}$**。

所以总的方案数有$1\times 2^{n^2-n}=2^{n^2-n}$。

####  3 给定含有$n$个元素的集合$A$，能够定义$2^n\times2^{(n^2-n)/2}$不同的对称关系

解答：对称关系对应的矩阵的特点是：对角线上的项可以是0或者1，其余项必须成对满足$m_{ij}=m_{ji}$。因此，获得这样的矩阵可以分为以下步骤：

1. 通过$n$步将对角线上的$n$项设为0或者1。因为每一步有2种方案，因此总共有**$2^n$**种方案。

2. 进行$（n^2-n）/2$ 步，每一步操作是将$m_{ij} ,m_{ji}$设置为以下2种情况之一：

   - $m_{ij}=0,m_{ji}=0$

   -  $m_{ij}=1,m_{ji}=1$ 。

     因为每一步有2种可选方案。所以总的方案数是$2^{(n^2-n)/2}$

根据乘法法则，以上共进行了$n+(n^2-n)/2$步，所以总的方案数是：$2^n\times2^{(n^2-n)/2}$

#### 4 给定含有$n$个元素的集合$A$，能够定义$2^n\times3^{(n^2-n)/2}$个不同的反对称关系

解答：对称关系对应的矩阵的特点是：对角线上的项可以是0或者1，其余项必须成对满足:$当m_{ij}=1时，m_{ji}=0$。因此，获得这样的矩阵可以分为以下步骤：

1. 通过$n$步将对角线上的$n$项设为0或者1。因为每一步有2种方案，因此总共有**$2^n$**种方案。

2. 进行$（n^2-n）/2$步，每一步操作是将$m_{ij} ,m_{ji}$设置为以下**3**种情况之一:

   - $m_{ij}=1,m_{ji}=0$

   -  $m_{ij}=0,m_{ji}=1$

   -  $m_{ij}=0,m_{ji}=0$ 。

     因为每一步有3种可选方案。所以总的方案数是$3^{(n^2-n)/2}$

 根据乘法法则，以上共进行了$n+(n^2-n)/2$步，总的方案数是：$2^n\times3^{(n^2-n)/2}$

#### 5 给定含有$n$个元素的集合$A$，能够定义$2^{(n^2-n)/2}$个不同的自反且对称的关系

解答：根据题目要求，对应的矩阵的特点是：对角线上的项全部是1，其余项成对满足：$m_{ij}=m_{ji}$。因此，获得这样的矩阵可以分为以下步骤：

1. 通过$1$步将对角线上的$n$项设为1。这一步只有**$1$**种方案。
2. 步进行$（n^2-n）/2$ 步，每一步操作如下：将$m_{ij} ,m_{ji}$设置为以下2种情况之一：
   - $m_{ij}=0,m_{ji}=0$
   -  $m_{ij}=1,m_{ji}=1$ 。

​          因为每一步有2种可选方案。所以总的方案数是$2^{(n^2-n)/2}$           

根据乘法法则，以上共进行了$n+(n^2-n)/2$步，总的方案数是：$1\times2^{(n^2-n)/2}=2^{(n^2-n)/2}$

#### 6 给定含有$n$个元素的集合$A$，能够定义$2^n\times3^{(n^2-n)/2}$个不同的自反且反对称关系

解答：根据题目要求，对应的矩阵的特点是：对角线上的项全部是1，其余项必须成对满足:$当m_{ij}=1时，m_{ji}=0$。因此，获得这样的矩阵可以分为以下步骤：

1. 通过$1$步将对角线上的$n$项设为0。因为这1步总共有**$1$**种方案。

2. 进行$（n^2-n）/2$步，每一步操作是将$m_{ij} ,m_{ji}$设置为以下**3**种情况之一:

   - $m_{ij}=1,m_{ji}=0$

   -  $m_{ij}=0,m_{ji}=1$

   -  $m_{ij}=0,m_{ji}=0$ 。

     因为每一步有3种可选方案。所以总的方案数是$3^{(n^2-n)/2}$

 根据乘法法则，以上共进行了$n+(n^2-n)/2$步，总的方案数是：$1\times3^{(n^2-n)/2}$

